{"version":3,"file":"js/279.c3407580.js","mappings":"sjBA2CA,MAAMA,GAAYC,EAAAA,EAAAA,KACZC,GAASC,EAAAA,EAAAA,KAAI,GACbC,GAAeD,EAAAA,EAAAA,IAAI,MACnBE,GAASF,EAAAA,EAAAA,IAAI,MACbG,GAAcH,EAAAA,EAAAA,IAAI,MAClBI,GAAcJ,EAAAA,EAAAA,IAAI,MAClBK,GAAUL,EAAAA,EAAAA,IAAI,MAGdM,EAAOA,KACX,GAAIP,EAAOQ,MAAO,CAChBH,EAAYG,MAAMC,YAAc,EAChCJ,EAAYG,MAAMD,OAClBT,EAAUY,SAAS,GAEnB,IAAIC,EAASC,SAASC,cAAc,OACpCF,EAAOG,UAAUC,IAAI,SACrB,MAAMA,EAAMZ,EAAOK,MAAMQ,YAAYL,GAErCM,YAAW,KACTd,EAAOK,OAAOU,YAAYH,EAAI,GAC7B,IACL,KAAO,CACLX,EAAYI,MAAMC,YAAc,EAChCL,EAAYI,MAAMD,OAClBT,EAAUY,SAAS,GAEnB,IAAIC,EAASC,SAASC,cAAc,OACpCF,EAAOG,UAAUC,IAAI,SACrB,MAAMA,EAAMZ,EAAOK,MAAMQ,YAAYL,GAErCM,YAAW,KACTd,EAAOK,OAAOU,YAAYH,EAAI,GAC7B,IACL,GAGII,EAAWA,KACXnB,EAAOQ,OACTR,EAAOQ,OAAQ,EACfY,cAAclB,EAAaM,OAG3BJ,EAAYI,MAAMa,UAElBrB,EAAOQ,OAAQ,EACfD,IAEAL,EAAaM,MAAQc,YAAYf,EAAM,KACzC,EAIIgB,EAAeA,KACnBjB,EAAQE,MAAMgB,iBAAiB,cAAc,KAC3ClB,EAAQE,MAAMM,UAAUC,IAAI,SAAS,IAGvCT,EAAQE,MAAMgB,iBAAiB,YAAY,KACzClB,EAAQE,MAAMM,UAAUW,OAAO,SAAS,GACxC,E,OAGJC,EAAAA,EAAAA,KAAU,KACRH,GAAc,KAEhBI,EAAAA,EAAAA,KAAY,KACVP,cAAclB,EAAaM,MAAM,I,0dCvGnC,MAAMoB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://wooden-fish-vue-web/./src/views/MuYu.vue","webpack://wooden-fish-vue-web/./src/views/MuYu.vue?f278"],"sourcesContent":["<!--\n * @Author: Jackie\n * @Date: 2023-06-25 09:58:10\n * @LastEditTime: 2023-08-16 17:53:13\n * @LastEditors: Jackie\n * @Description: 木鱼\n * @FilePath: /Wooden-Fish-Vue-Web/src/views/MuYu.vue\n * @version: \n-->\n<template>\n  <div class=\"muyu\">\n    <div class=\"wrap\">\n      <img\n        src=\"@/assets/images/my01.png\"\n        alt=\"muyu\"\n        ref=\"muyuRef\"\n        class=\"my\"\n        @click=\"play\"\n      />\n      <img\n        src=\"@/assets/images/my02.png\"\n        alt=\"muyugui\"\n        :class=\"isAuto ? 'myg2' : 'myg'\"\n      />\n      <div ref=\"eleAdd\"></div>\n      <div class=\"autobtn\" @click=\"autoPlay\">\n        {{ !isAuto ? '自动积累功德' : '手动积累功德' }}\n      </div>\n    </div>\n    <!--木鱼声-->\n    <audio ref=\"audioMusic1\">\n      <source src=\"@/assets/music/1.mp3\" />\n    </audio>\n    <!--1s延迟木鱼声-->\n    <audio ref=\"audioMusic2\">\n      <source src=\"@/assets/music/2.mp3\" />\n    </audio>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, onUnmounted } from 'vue';\nimport { useUserStore } from '@/store/user';\nconst userStore = useUserStore();\nconst isAuto = ref(false); // false 手动 true 自动\nconst intervalFlag = ref(null);\nconst eleAdd = ref(null);\nconst audioMusic1 = ref(null);\nconst audioMusic2 = ref(null);\nconst muyuRef = ref(null);\n\n// 自动/手动\nconst play = () => {\n  if (isAuto.value) {\n    audioMusic2.value.currentTime = 0;\n    audioMusic2.value.play();\n    userStore.setMerit(+1);\n\n    let eleDiv = document.createElement('div');\n    eleDiv.classList.add('show2');\n    const add = eleAdd.value.appendChild(eleDiv);\n\n    setTimeout(() => {\n      eleAdd.value?.removeChild(add);\n    }, 4000);\n  } else {\n    audioMusic1.value.currentTime = 0;\n    audioMusic1.value.play();\n    userStore.setMerit(+1);\n\n    let eleDiv = document.createElement('div');\n    eleDiv.classList.add('show1');\n    const add = eleAdd.value.appendChild(eleDiv);\n\n    setTimeout(() => {\n      eleAdd.value?.removeChild(add);\n    }, 2000);\n  }\n};\n\nconst autoPlay = () => {\n  if (isAuto.value) {\n    isAuto.value = false;\n    clearInterval(intervalFlag.value);\n\n    // audioMusic1.value.play(); //自动的音乐\n    audioMusic1.value.pause(); //音乐停止\n  } else {\n    isAuto.value = true;\n    play();\n    //setInterval是两秒后开始执行，所以要先执行一次\n    intervalFlag.value = setInterval(play, 2000);\n  }\n};\n\n// 兼容移动端 active\nconst mobileActive = () => {\n  muyuRef.value.addEventListener('touchstart', () => {\n    muyuRef.value.classList.add('active');\n  });\n\n  muyuRef.value.addEventListener('touchend', () => {\n    muyuRef.value.classList.remove('active');\n  });\n};\n\nonMounted(() => {\n  mobileActive();\n});\nonUnmounted(() => {\n  clearInterval(intervalFlag.value);\n});\n</script>\n\n<style lang=\"scss\" scoped>\n@keyframes run {\n  from {\n    transform: rotateZ(30deg);\n  }\n\n  to {\n    transform: rotateZ(12deg);\n  }\n}\n\n.muyu {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  .wrap {\n    width: 600px;\n    height: 500px;\n    position: relative;\n    transform: translate(0, -30%);\n    .my {\n      width: 400px;\n      position: absolute;\n      bottom: 75px;\n      left: 100px;\n      &:active + .myg {\n        transform: rotateZ(12deg);\n        transition: 0.05s;\n      }\n    }\n    .myg {\n      height: 100px;\n      position: absolute;\n      left: 280px;\n      top: 80px;\n      transform: rotateZ(30deg);\n      transition: transform 0.5s cubic-bezier(0.85, 0.1, 0.89, 0.65);\n    }\n\n    .myg2 {\n      height: 100px;\n      position: absolute;\n      left: 280px;\n      top: 80px;\n      transform: rotateZ(30deg);\n      animation: run 1s alternate infinite cubic-bezier(0.85, 0.1, 0.89, 0.65);\n    }\n    .autobtn {\n      position: absolute;\n      bottom: 0;\n      left: 50%;\n      transform: translateX(-50%);\n\n      padding: 8px 12px;\n      border-radius: 5px;\n      background-color: #cecece;\n      color: #000;\n      font-size: 16px;\n      cursor: pointer;\n      user-select: none;\n\n      text-align: center;\n      text-decoration: none;\n      transition: background-color 0.3s ease;\n      &:hover {\n        background-color: #888;\n      }\n      &:active {\n        background-color: #444;\n      }\n    }\n  }\n}\n</style>\n\n<style lang=\"scss\">\n@keyframes run1 {\n  from {\n    top: 150px;\n  }\n\n  to {\n    top: -100px;\n  }\n}\n.show1::after {\n  content: '功德+1';\n  color: #cecece;\n  font-size: 28px;\n  position: absolute;\n  top: 150px;\n  left: 240px;\n  animation: run1 2s 0.1s ease-in;\n}\n\n.show2::after {\n  content: '功德+1';\n  color: #cecece;\n  font-size: 28px;\n  position: absolute;\n  top: 180px;\n  left: 240px;\n  animation: run1 2s 1s ease-in;\n}\n</style>\n","import script from \"./MuYu.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./MuYu.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./MuYu.vue?vue&type=style&index=0&id=3aa3e53a&lang=scss&scoped=true\"\nimport \"./MuYu.vue?vue&type=style&index=1&id=3aa3e53a&lang=scss\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3aa3e53a\"]])\n\nexport default __exports__"],"names":["userStore","useUserStore","isAuto","ref","intervalFlag","eleAdd","audioMusic1","audioMusic2","muyuRef","play","value","currentTime","setMerit","eleDiv","document","createElement","classList","add","appendChild","setTimeout","removeChild","autoPlay","clearInterval","pause","setInterval","mobileActive","addEventListener","remove","onMounted","onUnmounted","__exports__"],"sourceRoot":""}